# nacos
[toc]
### nacos naming 服务注册中心
naming默认使用ap模式,采用阿里自定义协议distro.

#### distro协议
distro协议被定位为临时数据一致性协议.该协议下,不需要把数据存储到磁盘或者数据库,因为临时
数据通常和服务器保持一个session会话,只要会话存在,数据就不丢失.

***distro协议内容如下:***
- 客户端与服务端有两个重要的交互,服务注册与心跳发送
- 客户端以服务为维度向服务端注册,注册后每隔一段时间向服务端发送一次心跳,心跳包需要带上注册
  服务的全部信息.在客户端看来,服务端节点对等,所以请求的节点时随机的.
- 客户端请求失败则换一个节点重新发起请求
- 服务端节点存储所有数据,但每个节点只负责其中一部分服务,在接收到客户端"写"(注册,上线,下线)
  请求后,服务端节点判断请求的服务是否为自己负责,如果是,则处理,否则交给负责节点处理.
- 每个服务端主动发送健康检查到其他服务节点,有响应的节点被视为健康节点.
- 服务端在收到客户端服务的心跳后,如果该服务不存在,则将该心跳请求视为注册请求来处理
- 服务端如果长时间未收到客户端心跳后,则下线该服务
- 负责的服务端节点在接收到服务注册,服务心跳等写请求后将数据写入后返回,后台异步同步数据到其他
  节点
- 服务端节点在收到读请求后直接从本机获取后返回,无论数据是否为最新
  
***从源码中解读distro协议:***



### nacos config 配置管理中心

